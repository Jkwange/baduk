<html>

<head>
    <title>기우회 메인</title>
    <link rel="stylesheet" type="text/css" href="style.css" />
    <!--<script type="text/javascript" src="./main.js"></script>-->
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
</head>

<body>
    <header id="header" class="row">

        <img id="header-img"
            src="https://res.cloudinary.com/dk4dtpymd/image/upload/c_scale,w_300/v1562940409/hwpmktcbazqa2qbwaale.gif"
            alt="Go chess logo">
        <nav id="nav-bar">
            <ul>
                <strong>
                    <li><a class="nav-link" href="#definition">Definition</a></li>
                    <li><a class="nav-link" href="#video">Video</a></li>
                    <li><a class="nav-link" href="#products">Products</a></li>
                </strong>
            </ul>
        </nav>

    </header>
    <main>

        <!--Email-->
        <div id="email-container">
            <section id="email-form" class="container">
                <form id="form" action="main.html">
                    <h3>환영합니다.</h3>
                </form>
            </section>
        </div>


        <div class="container">
            <artical id="definition">

                <section id="info" class="container">
                    기우회 바둑 랭킹
                </section>
        </div>


        <!--Ladders-->
        <section id="products" class="container">
            <h3>기우회 승률 랭킹</h3>
            <div class="ladder-box">

            </div>

        </section>
        </artical>


        <footer>
            <ul>
                <li><a href="#">Privacy</a></li>
                <li><a href="#">Terms</a></li>
                <li><a href="#">Contact</a></li>
            </ul>
            <span>made by 기우회 컴공과들</span>
        </footer>
    </main>
</body>

</html>
<script>

    function setClock() {
        let today = new Date();
        let year = today.getFullYear(); // 년도
        let month = today.getMonth() + 1;  // 월
        let date = today.getDate();  // 날짜
        let day = today.getDay();  // 요일
        let hours = today.getHours(); // 시
        let minutes = today.getMinutes();  // 분
        let seconds = today.getSeconds();  // 초

        
        window.onbeforeunload = function () {
        localStorage.setItem('lastTime', year + "," + month + "," + date + "," + hours + "," + minutes + "," + seconds);
    };
    }


    function AccessChecking() {
        let today = new Date();
        const lastTime = localStorage.getItem('lastTime') ? localStorage.getItem('lastTime') : localStorage.setItem('lastTime', today.getFullYear(),(today.getMonth() + 1),today.getDate(),today.getHours(),today.getMinutes(),today.getSeconds());
        localStorage.setItem('lastTime', JSON.stringify(lastTime));
        const data = JSON.parse(localStorage.getItem('lastTime'));
        var start = new Date(today.getFullYear(),(today.getMonth() + 1),today.getDate(),today.getHours(),today.getMinutes(),today.getSeconds());
        var end = new Date(data.split(",")[0],data.split(",")[1],data.split(",")[2],data.split(",")[3],data.split(",")[4],data.split(",")[5]);
        var diffTime = (start.getTime()-end.getTime()) / (1000);

        console.log(lastTime);
        console.log(start.getTime());
        console.log(end.getTime());
        console.log(diffTime);
        
        var isChecked = localStorage.getItem('isChecked');
        console.log("isChecked : " + isChecked);
        if (diffTime > 10 && isChecked) { 
            localStorage.removeItem('isChecked'); 
        }
        

        if (!isChecked || lastTime==undefined) {
            alert("잘못된 접근입니다.");
            window.open("기우회사이트.html", "_self");
        }
    }


    window.onload = function () {
        setClock();
        setInterval(setClock, 500);
        AccessChecking();

    }
    

    


</script>
